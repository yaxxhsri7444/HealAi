<div class="flex flex-col h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black text-gray-200">
  <!-- Chat Window -->
  <div class="flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar">
    <div
      *ngFor="let msg of messages"
      class="flex"
      [ngClass]="{
        'justify-end': msg.sender === 'user',
        'justify-start': msg.sender === 'ai'
      }"
    >
      <div
        class="max-w-xs md:max-w-md p-3 rounded-2xl shadow-lg"
        [ngClass]="{
          'bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-br-none':
            msg.sender === 'user',
          'bg-gray-700/80 text-gray-200 border border-gray-600 rounded-bl-none':
            msg.sender === 'ai'
        }"
      >
        <p>{{ msg.text }}</p>
        <small class="block text-xs mt-1 opacity-70">{{
          msg.timestamp | date : 'shortTime'
        }}</small>
      </div>
    </div>
  </div>

  <!-- Typing indicator -->
  <div *ngIf="loading" class="px-4 py-2 text-gray-400 text-sm italic animate-pulse">
    AI is typing...
  </div>

  <!-- Input -->
  <div
    class="p-4 bg-gray-800/70 backdrop-blur-md border-t border-gray-700 flex items-center space-x-2"
  >
    <input
      type="text"
      [(ngModel)]="newMessage"
      placeholder="Type your message..."
      (keyup.enter)="sendMessage()"
      class="flex-1 border border-gray-600 rounded-full px-4 py-2 bg-gray-900 text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500"
    />
    <button
      (click)="sendMessage()"
      [disabled]="loading"
      class="p-3 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg hover:scale-110 hover:shadow-purple-500/50 transition-all disabled:opacity-50"
    >
      âž¤
    </button>
  </div>
</div>
