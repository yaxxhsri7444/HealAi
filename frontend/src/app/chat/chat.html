<div class="flex flex-col h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black text-gray-200">

  <!-- Chat Messages -->
  <div class="overflow-y-auto px-3 sm:px-4 md:px-6 space-y-3 sm:space-y-4 md:space-y-5 custom-scrollbar"
       style="max-height: calc(100vh - 120px);">
    <div
      *ngFor="let msg of messages"
      class="flex"
      [ngClass]="{
        'justify-end': msg.sender === 'user',
        'justify-start': msg.sender === 'ai'
      }"
    >
      <div
        class="max-w-[70%] sm:max-w-xs md:max-w-md p-3 sm:p-4 md:p-5 rounded-2xl shadow-xl transition-all duration-300 hover:scale-[1.02] break-words"
        [ngClass]="{
          'bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-br-none': msg.sender === 'user',
          'bg-gray-700/80 text-gray-200 border border-gray-600 rounded-bl-none': msg.sender === 'ai'
        }"
      >
        <p class="break-words text-sm sm:text-base md:text-base">{{ msg.text }}</p>
        <small class="block text-xs sm:text-sm mt-1 opacity-70">
          {{ msg.timestamp | date : 'shortTime' }}
        </small>
      </div>
    </div>
  </div>

  <!-- Loading Indicator -->
  <div *ngIf="loading" class="px-4 py-2 text-gray-400 text-sm sm:text-base italic animate-pulse">
    AI is typing...
  </div>

  <!-- Message Input -->
  <div class="flex-none p-3 sm:p-4 md:p-5 bg-gray-800/70 backdrop-blur-md border-t border-gray-700 flex items-center space-x-2 sm:space-x-3 md:space-x-4">
    <input
      type="text"
      [(ngModel)]="newMessage"
      placeholder="Type your message..."
      (keyup.enter)="sendMessage()"
      class="flex-1 border border-gray-600 rounded-full px-4 sm:px-5 md:px-6 py-2.5 sm:py-3 md:py-3 bg-gray-900 text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all text-sm sm:text-base"
    />
    <button
      (click)="sendMessage()"
      [disabled]="loading"
      class="p-3 sm:p-3.5 md:p-4 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg hover:scale-110 hover:shadow-purple-500/50 transition-all disabled:opacity-50 text-sm sm:text-base"
    >
      âž¤
    </button>
  </div>
</div>